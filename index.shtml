<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="utf-8">
    <title>我们结婚啦</title>
    <link href="css/reset.css" type="text/css" rel="stylesheet" />
    <link href="css/animate.css" type="text/css" rel="stylesheet" />
    <link href="css/global.css" type="text/css" rel="stylesheet" />
    <link href="css/idangerous.swiper.css" type="text/css" rel="stylesheet" />
    <link href="css/index.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/idangerous.swiper.js"></script>
    <script type="text/javascript" src="js/jquery.transit.min.js"></script>
</head>
<body>
    <div class="loadings">
        <img src="images/loading-pre.gif" alt="" class="center">
    </div>

    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="bg bg2 hidden">
                    <img src="images/pic1.png" alt="" class="pic1 center animated1 agz">
                    <img src="images/time.png" alt="" class="time center animated1 fadeInUp1 delay1">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="bg bg3 animated1 agz hidden">
                    <img src="images/t3-1.png" alt="" class="t3-1 animated1 fadeInRight delay0p5">
                    <img src="images/t3-2.png" alt="" class="t3-2 animated1 fadeInRight delay1">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="bg bg4 animated1 agz">
                    <img src="images/t4-2.png" alt="" class="t4-2 animated1 fadeInUp1 delay0p5">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="bg bg5 animated1 agz">
                    <img src="images/t5-1.png" alt="" class="t5-1 animated1 fadeInUp delay0p5">
                    <img src="images/t5-2.png" alt="" class="t5-2 animated1 fadeInUp delay1">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="bg bg6 animated1 agz">
                    <img src="images/t6-1.png" alt="" class="t6-1 animated1 fadeInUp delay0p5">
                    <img src="images/t6-2.png" alt="" class="t6-2 animated1 fadeInUp delay1">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="bg bg7 animated1 agz">
                    <img src="images/t7-1.png" alt="" class="t7-1 animated1 fadeInUp delay0p5">
                    <img src="images/t7-2.png" alt="" class="t7-2 animated1 fadeInUp delay1">
                </div>
            </div>
            <div class="swiper-slide slide7">
                <div class="bg bg8 animated agz">
                    <img src="images/tit.png" alt="" class="tit center animated fadeInDown delay0p5">
                    <img src="images/us.png" alt="" class="us center animated zoomIn delay1">
                    <img src="images/welcome.png" alt="" class="welcome center animated fadeIn delay1p5">
                    <p class="animated fadeIn delay2">
                        <span>乘车路线：</span><br />
                        <em>麻城：</em>自武汉（汉口站、武昌站、武汉站）乘坐动车至麻城北站。<br />
                        <em>仙桃：</em>自武汉（汉口站、武昌站、武汉站）乘坐动车至仙桃西站。<br />
                        <em>注：</em>路途遥远的童鞋可以到武汉中转。另外，快到目的地时及时电联，以便安排接应。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="page hidden">
        <img src="images/hd.png" alt="" class="hd animated1 fadeInRight delay0p5">
        <img src="images/jiezhi.png" alt="" class="jz animated agz delay1p5">
        <img src="images/hd1.png" alt="" class="hd1 animated afly4 delay0p5">
        <img src="images/text.png" alt="" class="text animated1 fadeInUp delay2">
        <div class="open-box animated1 zoomIn delay3">
            <img src="images/pic1.png" alt="" class="pic center">
            <img src="images/body.png" alt="" class="open-body">
            <img src="images/open.png" alt="" class="open-head">
            <img src="images/xin.png" alt="" class="xin boom">
        </div>
    </div>

    <!-- 飘花 -->
    <div id="snowflake" class="hidden"></div>
    

    <div class="arrow hidden"></div>
    
    <a href="javascript:;" class="wo-btn btn-music btn-mopen" id="btn-music"></a>
    <audio src="yinyue/gbyy3.mp3" id="music" autoplay loop></audio>

    <script type="text/javascript">
        window.onload = function () {
            $(".loadings").remove();
            $(".page").show();
        }

        $(function () {
            var mySwiper = $('.swiper-container').swiper({
                mode:'vertical',
                loop: false,
                noSwiping: true,
                onSlideChangeEnd:function() {
                    $(".swiper-slide").each(function() {
                        if($(this).hasClass("swiper-slide-active")) {
                            $(this).children().show();
                            $(this).siblings().children().hide();
                        } 
                    })
                    if($(".slide7").hasClass("swiper-slide-active")) {
                        $("#snowflake").show();
                        snowflake();
                        $(".arrow").hide();
                    } else {
                        $(".arrow").show();
                    }
                }
            })

            var music = document.getElementById('music');
            $(".btn-music").click(function () {
                if (music.paused) {
                    music.play();
                    $(".btn-music").removeClass("btn-mclose").addClass("btn-mopen");
                } else {
                    music.pause();
                    $(".btn-music").removeClass("btn-mopen").addClass("btn-mclose");
                }
            });

            //第一P动画
            $(".xin").click(function() {
                $(this).fadeOut();
                $(".open-head").addClass("skew");
                $(".open-box").removeClass("slideInUp delay1p5");
                $(".open-box").addClass("scale delay3");
                setTimeout(function() {
                    $(".open-head").addClass("animated fadeOut");
                    $(".open-body").addClass("move");
                },2000);
                setTimeout(function() {
                    $(".page").fadeOut();
                    $(".bg2").show();
                    $(".arrow").show();
                },5200);
            });

            //飘花
            var snowflakeURl = [
                'images/hua1.png',
                'images/hua2.png',
                'images/hua3.png',
                'images/hua4.png',
                'images/hua5.png',
                'images/hua6.png'
            ]

            ///////
            //飘花 //
            ///////
            function snowflake() {
                var container = $("#snowflake");
                visualWidth = container.width();
                visualHeight = container.height();
                // 雪花容器
                var $flakeContainer = $('#snowflake');

                // 随机六张图
                function getImagesName() {
                    return snowflakeURl[[Math.floor(Math.random() * 6)]];
                }
                // 创建一个雪花元素
                function createSnowBox() {
                    var url = getImagesName();
                    return $('<div class="snowbox" />').css({
                        'width': 23,
                        'height': 23,
                        'position': 'absolute',
                        'backgroundSize': 'cover',
                        'zIndex': 100000,
                        'top': '-41px',
                        'backgroundImage': 'url(' + url + ')'
                    }).addClass('snowRoll');
                }
                // 开始飘花
                setInterval(function() {
                    // 运动的轨迹
                    var startPositionLeft = Math.random() * visualWidth - 100,
                        startOpacity    = 1,
                        endPositionTop  = visualHeight - 40,
                        endPositionLeft = startPositionLeft - 100 + Math.random() * 500,
                        duration        = visualHeight * 10 + Math.random() * 5000;

                    // 随机透明度，不小于0.5
                    var randomStart = Math.random();
                    randomStart = randomStart < 0.5 ? startOpacity : randomStart;

                    // 创建一个雪花
                    var $flake = createSnowBox();

                    // 设计起点位置
                    $flake.css({
                        left: startPositionLeft,
                        opacity : randomStart
                    });

                    // 加入到容器
                    $flakeContainer.append($flake);

                    // 开始执行动画
                    $flake.transition({
                        top: endPositionTop,
                        left: endPositionLeft,
                        opacity: 0.7
                    }, duration, 'ease-out', function() {
                        $(this).remove() //结束后删除
                    });
                    
                }, 700);
            }
        })
    </script>
</body>
</html>
